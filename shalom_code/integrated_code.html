<!DOCTYPE html>
<!-- Website - www.codingnepalweb.com -->
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Infinite Card Slider JavaScript | CodingNepal</title>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Fontawesome Link for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
    <script src="script.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <div class="wrapper">
      <i id="left" class="fa-solid fa-angle-left"></i>
      <ul class="carousel">
        <li class="card">
          <h1>test</h1>
          <h2>data goes here</h2>
          <h4>it works?</h4>
          <h3>card1</h3>
        </li>
        <li class="card">
          <div class="blocker" style="width: 100%;height: 100%;">
            <canvas id="myChart"></canvas>
        </div>
    
        <script>
            const ctx = document.getElementById('myChart');
            async function fetchData() {
                const resp = await fetch("https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=IBM&interval=5min&apikey=demo");
                let json = (await resp.json())["Time Series (5min)"];
                console.log(json);
                const firstKey = Object.keys(json)[0].split(" ")[0];
                let data = Object.entries(json).filter(arg => {
                    if (arg[0].startsWith(firstKey)) {
                        return true;
                    }
                    return false;
                });
                data = data.slice(0, 10);
                const valMap = {};
                data.forEach(entry => {
                    valMap[entry[0].split(" ")[1]] = entry[1]['4. close'];
                });
    
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: Object.keys(valMap),
                        datasets: [{
                            label: 'Closing Price',
                            data: Object.values(valMap),
                            borderWidth: 3,
                            borderColor: 'rgb(0,255,120)',
                            pointBackgroundColor: 'rgb(0,255,200)'
                        }]
                    },
                    options: {
                        layout: {
                            padding: 20
                        },
                        scales: {
                            x: {
                                // display: false
                            },
                            y: {
                                // display: false
                            }
                        }
                    }
                });
            }
    
            fetchData();
        </script>
          </li>
          <li class="card">
            <h1>test</h1>
            <h2>data goes here</h2>
            <h4>it works?</h4>
            <h3>card3</h3>
          </li>
          <li class="card">
            <h1>test</h1>
            <h2>data goes here</h2>
            <h4>it works?</h4>
            <h3>card4</h3>
          </li>
          <li class="card">
            <h1>test</h1>
            <h2>data goes here</h2>
            <h4>it works?</h4>
            <h3>card5</h3>
          </li>
          <li class="card">
            <h1>test</h1>
            <h2>data goes here</h2>
            <h4>it works?</h4>
            <h3>card5</h3>
          </li>

      </ul>
      <i id="right" class="fa-solid fa-angle-right"></i>
    </div>

    <div class="wrapper">
      <i id="left" class="fa-solid fa-angle-left"></i>
      <ul class="carousel">
        <li class="card">
          <h1>test</h1>
          <h2>data goes here</h2>
          <h4>it works?</h4>
          <h3>card1</h3>
        </li>
        <li class="card">
            <h1>test</h1>
            <h2>data goes here</h2>
            <h4>it works?</h4>
            <h3>card2</h3>
          </li>
          <li class="card">
            <h1>test</h1>
            <h2>data goes here</h2>
            <h4>it works?</h4>
            <h3>card3</h3>
          </li>
          <li class="card">
            <h1>test</h1>
            <h2>data goes here</h2>
            <h4>it works?</h4>
            <h3>card4</h3>
          </li>
          <li class="card">
            <h1>test</h1>
            <h2>data goes here</h2>
            <h4>it works?</h4>
            <h3>card5</h3>
          </li>
          <li class="card">
            <h1>test</h1>
            <h2>data goes here</h2>
            <h4>it works?</h4>
            <h3>card5</h3>
          </li>

      </ul>
      <i id="right" class="fa-solid fa-angle-right"></i>
    </div>

  </body>
</html>